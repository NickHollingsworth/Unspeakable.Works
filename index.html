<!doctype html>
<html>
	<head>
		<meta charset="utf-8"/>
		<title>Title Hello World</title>
	</head>
	<body>
		<p>Header hello world</p>
		<div id='content'>
			<p>Content goes here</p>
			<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
			<script>
				// get the name of the content file from the URL query string
				var urlObject = new URL(document.location.href);
				var params = urlObject.searchParams;
				var page = params.get("page");

				// define placeholders to replace with markdown
				let linkRegex = /\[link:(\w+)\]/g;
				let linkReplace = '[$1](index.html?page=$1.md)';
				//let linkRegex = '(link:';
				//let linkReplace = '[link](index.html?page=';

				// fetch the requested content and insert it in this page
				fetch(page, {cache: "no-cache"})           // Read requested markdown file...
					.then(response => response.blob())     // ...into a Blob...
					.then(blob => blob.text())             // ...convert it to text...
					.then(text => text.replaceAll(
						linkRegex, linkReplace))           // ...replace placeholders with markdown...
					.then(markdown => {                    // ...convert to html and insert
						document.getElementById("content").innerHTML = marked.parse(markdown);
					});
				</script>
		</div>
	</body>
</html>
